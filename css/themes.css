/* ========================================
   THEMES.CSS
   Enthält alle Farbvariablen und Theme-Logik
   ======================================== */

/* 1. LIGHT MODE (Standard & Basis-Variablen) */
:root {
    /* Hintergrund */
    --app-bg-start: #F2F2F7;
    --app-bg-end: #E5E5EA;

    /* Text */
    --text-main: #000000;
    --text-secondary: #3C3C43;

    /* System Farben */
    --primary-color: rgb(0, 136, 255);
    --success-color: rgb(52, 199, 89);
    --danger-color: rgb(255, 56, 60);

    --business-color: #e20074;
    --private-color: rgb(0, 136, 255);

    --corner-radius: 12px;

    /* Glassmorphism Cards (Light) */
    --card-bg: rgba(255, 255, 255, 0.65);
    --card-border: rgba(255, 255, 255, 0.4);
    --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.10);

    /* Inputs */
    --input-bg: rgba(255, 255, 255, 0.8);
    --input-border: #c6c6c8;

    /* --- DARK MODE PALETTE (Gespeichert in Variablen für spätere Nutzung) --- */
    --dark-app-bg-start: #000000;
    --dark-app-bg-end: #1C1C1E;
    --dark-text-main: #FFFFFF;
    --dark-text-secondary: #EBEBF5;

    --dark-primary-color: rgb(0, 145, 255);
    --dark-success-color: rgb(48, 209, 88);
    --dark-danger-color: rgb(255, 66, 69);

    --dark-business-color: #ff4d9e;
    --dark-private-color: rgb(0, 145, 255);

    --dark-card-bg: rgba(28, 28, 30, 0.60);
    --dark-card-border: rgba(255, 255, 255, 0.1);
    --dark-card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);

    --dark-input-bg: rgba(44, 44, 46, 0.8);
    --dark-input-border: #38383a;

    /* Apple Light Gray Button Background */
    --btn-sec-bg: rgb(229, 229, 234);
    --btn-sec-text: var(--text-main);

    --float-btn-bg: rgba(255, 255, 255, 0.85);
    --float-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);

    /* Segmented Control Colors (iOS Style) */
    --seg-bg: rgba(118, 118, 128, 0.12);
    /* Hellgrauer Container */
    --seg-active-bg: #FFFFFF;
    /* Weißer Button darauf */
    --seg-text: #000000;
    --seg-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
    /* Kleiner Schatten für den weißen Button */
}

/* 2. DARK MODE AKTIVIERUNG */

/* A) Wenn Nutzer MANUELL "Dunkel" gewählt hat */
[data-theme="dark"] {
    --app-bg-start: var(--dark-app-bg-start);
    --app-bg-end: var(--dark-app-bg-end);
    --text-main: var(--dark-text-main);
    --text-secondary: var(--dark-text-secondary);
    --primary-color: var(--dark-primary-color);
    --success-color: var(--dark-success-color);
    --danger-color: var(--dark-danger-color);
    --business-color: var(--dark-business-color);
    --private-color: var(--dark-private-color);
    --card-bg: var(--dark-card-bg);
    --card-border: var(--dark-card-border);
    --card-shadow: var(--dark-card-shadow);
    --input-bg: var(--dark-input-bg);
    --input-border: var(--dark-input-border);
    --btn-sec-bg: rgba(255, 255, 255, 0.10);
    --btn-sec-text: #FFFFFF;
    --float-btn-bg: rgba(44, 44, 46, 0.85);
    --float-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    --seg-bg: rgba(118, 118, 128, 0.24);
    --seg-active-bg: #636366;
    /* System Gray 3 */
    --seg-text: #FFFFFF;
    --seg-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
}

/* B) Wenn SYSTEM auf "Dunkel" steht (und nicht manuell überschrieben) */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        --app-bg-start: var(--dark-app-bg-start);
        --app-bg-end: var(--dark-app-bg-end);
        --text-main: var(--dark-text-main);
        --text-secondary: var(--dark-text-secondary);
        --primary-color: var(--dark-primary-color);
        --success-color: var(--dark-success-color);
        --danger-color: var(--dark-danger-color);
        --business-color: var(--dark-business-color);
        --private-color: var(--dark-private-color);
        --card-bg: var(--dark-card-bg);
        --card-border: var(--dark-card-border);
        --card-shadow: var(--dark-card-shadow);
        --input-bg: var(--dark-input-bg);
        --input-border: var(--dark-input-border);
        --btn-sec-bg: rgba(255, 255, 255, 0.10);
        --btn-sec-text: #FFFFFF;
        --float-btn-bg: rgba(44, 44, 46, 0.85);
        --float-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        --seg-bg: rgba(118, 118, 128, 0.24);
        --seg-active-bg: #636366;
        /* System Gray 3 */
        --seg-text: #FFFFFF;
        --seg-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
    }

    /* CSS-Logik für Elemente im Dark Mode (System oder Manuell) */
    :root:not([data-theme="light"]) .active-trip,
    [data-theme="dark"] .active-trip {
        background: rgba(60, 50, 20, 0.8);
        color: #fff;
    }

    :root:not([data-theme="light"]) .trip-buttons .edit-button:active,
    [data-theme="dark"] .trip-buttons .edit-button:active {
        background-color: rgba(128, 128, 128, 0.2);
    }
}


/* 3. MIDNIGHT THEME */
[data-theme="midnight"] {
    --app-bg-start: #0f172a;
    --app-bg-end: #1e293b;
    --text-main: #ffffff;
    --text-secondary: #94a3b8;
    --primary-color: #38bdf8;
    --success-color: #4ade80;
    --danger-color: #f87171;
    --business-color: #f472b6;
    --private-color: #38bdf8;
    --card-bg: rgba(30, 41, 59, 0.7);
    --card-border: rgba(255, 255, 255, 0.1);
    --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
    --input-bg: rgba(15, 23, 42, 0.6);
    --input-border: #334155;
    --btn-sec-bg: rgba(255, 255, 255, 0.15);
    --btn-sec-text: #FFFFFF;
    --float-btn-bg: rgba(30, 41, 59, 0.85);
    --float-btn-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    --seg-bg: rgba(0, 0, 0, 0.3);
    --seg-active-bg: rgba(56, 189, 248, 0.2);
    /* Leichtes Blau */
    --seg-text: #FFFFFF;
}

[data-theme="midnight"] .active-trip {
    background: rgba(120, 53, 15, 0.6);
    color: #fff;
    border-left-color: #fbbf24;
}

[data-theme="midnight"] .trip-buttons .edit-button:active {
    background-color: rgba(56, 189, 248, 0.2);
}